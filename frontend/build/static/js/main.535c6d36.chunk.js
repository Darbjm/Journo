(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{48:function(e,a,t){e.exports=t(81)},53:function(e,a,t){},54:function(e,a,t){},81:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(44),s=t.n(l),c=(t(53),t(54),t(55),t(9)),i=t.n(c),o=t(12),m=t(1),d=t(16),u=t(5),p=t(4),h=t(7),g=t(6),E=t(8),v=t(11),N=t.n(v),b=function(){function e(){Object(u.a)(this,e)}return Object(p.a)(e,null,[{key:"setToken",value:function(e){localStorage.setItem("token",e)}},{key:"getToken",value:function(){return localStorage.getItem("token")}},{key:"logout",value:function(){localStorage.removeItem("token")}},{key:"getPayload",value:function(){var e=this.getToken();if(!e)return!1;var a=e.split(".");return!(a.length<3)&&JSON.parse(atob(a[1]))}},{key:"isAuthenticated",value:function(){var e=this.getPayload();return!!e&&Math.round(Date.now()/1e3)<e.exp}},{key:"getUser",value:function(){return this.getPayload().sub}}]),e}(),f=t(13),w=function(e){function a(){var e,t;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(t=Object(h.a)(this,(e=Object(g.a)(a)).call.apply(e,[this].concat(r)))).state={data:{email:"",password:""},error:""},t.handleChange=function(e){var a=e.target,n=a.name,r=a.value,l=Object(d.a)({},t.state.data,Object(m.a)({},n,r));t.setState({data:l,error:""})},t.handleSubmit=function(){var e=Object(o.a)(i.a.mark((function e(a){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,N.a.post("/api/users/login",t.state.data);case 4:n=e.sent,b.setToken(n.data.token),t.props.history.push("/profile/".concat(b.getUser())),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t.setState({error:"Invalid Credentials"});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(a){return e.apply(this,arguments)}}(),t}return Object(E.a)(a,e),Object(p.a)(a,[{key:"render",value:function(){var e=this.state.error;return r.a.createElement("section",{className:"section hero-login"},r.a.createElement("div",{className:"center"},r.a.createElement("div",{className:"column is-6-tablet is-offset-3-tablet is-8-mobile is-offset-2-mobile"},r.a.createElement("form",{onSubmit:this.handleSubmit,className:"has-text-centered is-centered"},r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input is-rounded is-large ".concat(e?"is-danger":""),name:"email",placeholder:"Email",onChange:this.handleChange}))),r.a.createElement("div",{className:"loginfield"},r.a.createElement("br",null),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input is-rounded is-large ".concat(e?"is-danger":""),type:"password",name:"password",placeholder:"Password",onChange:this.handleChange})),r.a.createElement("div",{className:"invalid"},r.a.createElement("small",{className:"is-danger"},e))),r.a.createElement("br",null),r.a.createElement("div",{className:"is-row"},r.a.createElement("div",{className:"control is-row"},r.a.createElement("button",{type:"submit",className:"button is-rounded is-large color has-text-white"},"Login")),r.a.createElement("div",{className:"control is-row"},r.a.createElement("h3",{className:"has-text-white"},"Don't have an account? ",r.a.createElement(f.b,{to:"/register"},"Sign up"))))))))}}]),a}(r.a.Component),y=t(22),C=function(e){function a(){var e,t;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(t=Object(h.a)(this,(e=Object(g.a)(a)).call.apply(e,[this].concat(r)))).state={image:null,selectedImage:null},t.handleUpload=function(){var e=Object(o.a)(i.a.mark((function e(a){var n,r,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.target.files,(r=new FormData).append("file",n[0]),r.append("upload_preset","fkrgmpqn"),e.next=6,N.a.post("https://api.cloudinary.com/v1_1/dkb9vu8mh/image/upload",r);case 6:l=e.sent,t.setState({image:l.data.url},(function(){t.props.handleChange({target:{name:t.props.fieldName,value:l.data.url}}),console.log(t.props)}));case 8:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),t}return Object(E.a)(a,e),Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=this.props.value,console.log(this.props),this.setState({image:a});case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.labelClassName?this.props.labelClassName:"default_class",a=this.state.image;return r.a.createElement("div",{className:"is-row image-input"},a&&r.a.createElement("div",null,r.a.createElement("img",{src:a,alt:a,className:"upload-image"})),r.a.createElement("label",{className:e},this.props.labelText),r.a.createElement("input",{className:this.props.inputClassName,type:"file",onChange:this.handleUpload}))}}]),a}(r.a.Component),O=function(e){function a(){var e,t;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(t=Object(h.a)(this,(e=Object(g.a)(a)).call.apply(e,[this].concat(r)))).state={data:{username:"",email:"",password:"",password_confirmation:"",image:""},errors:{}},t.handleChange=function(e){var a=Object(d.a)({},t.state.data,Object(m.a)({},e.target.name,e.target.value)),n=Object(d.a)({},t.state.errors,Object(m.a)({},e.target.name,""));t.setState({data:a,errors:n})},t.handleSubmit=function(){var e=Object(o.a)(i.a.mark((function e(a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),console.log("submitting",t.state.data),e.prev=2,e.next=5,N.a.post("/api/users/register",t.state.data);case 5:t.props.history.push("/login"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),t.setState({errors:e.t0.response.data});case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(a){return e.apply(this,arguments)}}(),t}return Object(E.a)(a,e),Object(p.a)(a,[{key:"render",value:function(){var e=this.state.errors;return r.a.createElement("section",{className:"section hero-login"},r.a.createElement("div",{className:"center"},r.a.createElement("form",{onSubmit:this.handleSubmit,className:"column is-6-tablet is-offset-3-tablet is-8-mobile is-offset-2-mobile card"},r.a.createElement("div",{className:"user-info"},r.a.createElement("h2",{className:"title"},"Register"),r.a.createElement("br",null),r.a.createElement("div",{className:"fieldContainer"},r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input is-small is-rounded ".concat(e.username?"is-danger":""),placeholder:"Username",name:"username",onChange:this.handleChange})),e.username&&r.a.createElement("small",{className:"help is-danger"},e.username)),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input is-small is-rounded ".concat(e.email?"is-danger":""),placeholder:"Email",name:"email",onChange:this.handleChange})),e.email&&r.a.createElement("small",{className:"help is-danger"},e.email)),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"textarea is-small is-rounded ".concat(e.bio?"is-danger":""),placeholder:"Bio",name:"bio",onChange:this.handleChange})),e.bio&&r.a.createElement("small",{className:"help is-danger"},e.bio)),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input is-small is-rounded ".concat(e.password?"is-danger":""),type:"password",placeholder:"Password",name:"password",onChange:this.handleChange})),e.password&&r.a.createElement("small",{className:"help is-danger"},e.password)),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input is-small is-rounded ".concat(e.password_confirmation?"is-danger":""),type:"password",placeholder:"Password Confirmation",name:"password_confirmation",onChange:this.handleChange})),e.password_confirmation&&r.a.createElement("small",{className:"help is-danger"},e.password_confirmation)))),r.a.createElement("div",{className:"user-image"},r.a.createElement(C,{handleChange:this.handleChange,fieldName:"image",inputClassName:"".concat(e.image?"is-danger":""),className:"image-input"}),e.image&&r.a.createElement("small",{className:"help is-danger"},e.image),r.a.createElement("div",{className:"is-row"},r.a.createElement("div",{className:"control is-row"},r.a.createElement("button",{type:"submit",className:"button is-rounded is-small color has-text-white"},"Register")),r.a.createElement("div",{className:"control is-row"},r.a.createElement("h3",null,"Already have an account? ",r.a.createElement(f.b,{to:"/login"},"Login"))))))))}}]),a}(r.a.Component),k=function(e){function a(){var e,t;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(t=Object(h.a)(this,(e=Object(g.a)(a)).call.apply(e,[this].concat(r)))).state={user:{},trips:[]},t}return Object(E.a)(a,e),Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var a,t,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=b.getUser(),e.prev=1,e.next=4,N.a.get("/api/users/show/".concat(a),{headers:{Authorization:"Bearer ".concat(b.getToken())}});case 4:t=e.sent,n=t.data.trips,r=[n[0],n[1],n[2]],this.setState({trips:r}),this.setState({user:t.data}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0),this.props.history.push("/error");case 15:case"end":return e.stop()}}),e,this,[[1,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,a=e.user,t=e.trips;return a?(console.log(a),r.a.createElement("section",{className:"section hero-profile"},r.a.createElement("div",{className:"profile-fit"},r.a.createElement("div",{className:"tile is-ancestor"},r.a.createElement("div",{className:"tile is-vertical"},r.a.createElement("div",{className:"tile"},r.a.createElement("img",{className:"user-profileimage",src:a.image,alt:a.image}),r.a.createElement("div",{className:"tile end"},r.a.createElement("div",{className:"flex"},t&&t.map((function(e){return r.a.createElement(f.b,{to:"/showtrip/".concat(e.id,"/"),key:e.id,className:"card"},r.a.createElement("img",{className:"tripimage",src:e.image,alt:e.image}),r.a.createElement("div",{className:"text-card"},r.a.createElement("h1",null,e.country),r.a.createElement("h2",null,e.local_area),r.a.createElement("h3",null,"\xa3",e.cost),r.a.createElement("h4",null,"Rating: ",e.rating," \u2605")))}))))),r.a.createElement("div",{className:"tile"},r.a.createElement("div",{className:"tile is-child box"},r.a.createElement("article",{className:"media"},r.a.createElement("div",{className:"media-content"},r.a.createElement("div",{className:"content"},r.a.createElement("p",null,r.a.createElement("strong",null,a.username)," - ",r.a.createElement("small",null,a.email),r.a.createElement("br",null),a.bio))),r.a.createElement("div",{className:"center"},r.a.createElement("div",{className:"media-right"},r.a.createElement(f.b,{className:"button is-rounded color",to:"/profile/".concat(b.getUser(),"/edit")},"Edit"))))))))))):null}}]),a}(r.a.Component),j=t(3),x=function(e){function a(e){var t;return Object(u.a)(this,a),(t=Object(h.a)(this,Object(g.a)(a).call(this,e))).state={search:"",recent:[],width:0,height:0},t.handleChange=function(e){t.setState({search:e.target.value})},t.componentDidMount=Object(o.a)(i.a.mark((function e(){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.updateWindowDimensions(),window.addEventListener("resize",t.updateWindowDimensions),e.prev=2,e.next=5,N.a.get("api/trips/");case 5:a=e.sent,n=a.data,t.setState({recent:n.slice(-5)}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])}))),t.handleSubmit=function(e){e.preventDefault(),t.props.history.push("/map/".concat(t.state.search))},t.handleClick=function(e){console.log(e.target.id),localStorage.setItem("skill",e.target.id)},t.state={width:0,height:0},t.updateWindowDimensions=t.updateWindowDimensions.bind(Object(j.a)(t)),t}return Object(E.a)(a,e),Object(p.a)(a,[{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowDimensions)}},{key:"updateWindowDimensions",value:function(){this.setState({width:window.innerWidth,height:window.innerHeight})}},{key:"render",value:function(){var e=this.state,a=e.recent,t=e.width;return console.log(this.state.width),r.a.createElement("div",{className:"hero-body"},r.a.createElement("div",{className:"home-section"},r.a.createElement("section",{className:"search-section"},r.a.createElement("form",{onSubmit:this.handleSubmit,className:"search-bar"},r.a.createElement("div",{className:"search"},r.a.createElement("input",{type:"text",className:"search-text",placeholder:"Where to?",onChange:this.handleChange}),r.a.createElement("button",{type:"submit",className:"search-button"},r.a.createElement("img",{src:"https://image.flaticon.com/icons/svg/942/942196.svg"})))),r.a.createElement("div",{className:"tile is-ancestor"},r.a.createElement("div",{className:"tile is-vertical"},r.a.createElement("div",{className:"tile"},r.a.createElement("div",{className:"tile centered"},r.a.createElement("div",{className:"flex"},t>768?a&&a.map((function(e){return r.a.createElement(f.b,{to:"/showtrip/".concat(e.id,"/"),key:e.id,className:"card"},r.a.createElement("img",{className:"tripimage",src:e.image,alt:e.image}),r.a.createElement("div",{className:"text-card"},r.a.createElement("h1",null,e.country),r.a.createElement("h2",null,e.local_area),r.a.createElement("h3",null,"\xa3",e.cost),r.a.createElement("h4",null,"Rating: ",e.rating," \u2605")))})):a&&r.a.createElement(f.b,{to:"/showtrip/".concat(a[0].id,"/"),key:a[0].id,className:"card"},r.a.createElement("img",{className:"recent[0]image",src:a[0].image,alt:a[0].image}),r.a.createElement("div",{className:"text-card"},r.a.createElement("h1",null,a[0].country),r.a.createElement("h2",null,a[0].local_area),r.a.createElement("h3",null,"\xa3",a[0].cost),r.a.createElement("h4",null,"Rating: ",a[0].rating," \u2605")))))))))))}}]),a}(r.a.Component),S=t(10),_=(t(80),t(29));function A(){var e=this,a=Object(n.useState)({longitude:0,latitude:0,zoom:2}),t=Object(S.a)(a,2),l=t[0],s=t[1],c=Object(n.useState)({}),m=Object(S.a)(c,2),u=m[0],p=m[1],h=Object(n.useState)(null),g=Object(S.a)(h,2),E=g[0],v=g[1],b=function(){var a=Object(o.a)(i.a.mark((function a(){var t,n,r,l,c,o,m,u;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t="pk.eyJ1IjoiZGFyYmptIiwiYSI6ImNrNWk5MDFwMjA5NmozZW5weWUyb21xa3YifQ.iJv7D-hvXJ2Tw4p2AiQMtQ",n=window.location.pathname.split("/").slice(2).join("/"),a.next=5,N.a.get("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(n,".json?access_token=").concat(t));case 5:return 0===(r=a.sent).data.features.length&&(e.props.history.push("/map/sudan"),alert("Sorry we couldn't find that address")),l=r.data.features[0].center,c={longitude:l[0],latitude:l[1],zoom:5},s(c),a.next=12,N.a.get("/api/trips");case 12:o=a.sent,m=o.data,u=m.map((function(e){return e.local_area})),Promise.all(u.map((function(e){return N.a.get("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(e,".json?access_token=").concat(t))}))).then((function(e){var a=e.map((function(e){return e.data.features[0].center}));p(m.map((function(e,t){return Object(d.a)({},e,{latlng:a[t]})})))})),a.next=21;break;case 18:a.prev=18,a.t0=a.catch(0),console.log(a.t0);case 21:case"end":return a.stop()}}),a,null,[[0,18]])})));return function(){return a.apply(this,arguments)}}();return Object(n.useEffect)((function(){b()}),[]),r.a.createElement("div",null,r.a.createElement(_.c,Object.assign({},l,{mapStyle:"mapbox://styles/mapbox/streets-v9",mapboxApiAccessToken:"pk.eyJ1IjoiZGFyYmptIiwiYSI6ImNrNWk5MDFwMjA5NmozZW5weWUyb21xa3YifQ.iJv7D-hvXJ2Tw4p2AiQMtQ",height:"100vh",width:"100vw",onViewportChange:function(e){s(e)}}),u[0]&&u.map((function(e,a){return r.a.createElement(_.a,{key:a,latitude:e.latlng[1],longitude:e.latlng[0]},r.a.createElement("a",{onClick:function(a){a.preventDefault(),v(E?null:e)}},r.a.createElement("img",{src:e.image,alt:e.name,className:"tripsmap"})))})),E&&r.a.createElement(_.b,{latitude:E.latlng[1],longitude:E.latlng[0]},r.a.createElement("a",null,r.a.createElement(f.b,{to:"/showtrip/".concat(E.id)},E.local_area,r.a.createElement("br",null),E.Length,r.a.createElement("br",null),"\xa3",E.cost,r.a.createElement("h3",null,E.rating," ",r.a.createElement("span",{className:"star"},"\u2605")))))))}var D=t(27),L=function(e){var a=e.component,t=Object(D.a)(e,["component"]);return b.isAuthenticated()?r.a.createElement(y.b,Object.assign({},t,{component:a})):(b.logout(),r.a.createElement(y.a,{to:"/login"}))},I=function(e){function a(){var e,t;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(t=Object(h.a)(this,(e=Object(g.a)(a)).call.apply(e,[this].concat(r)))).state={searchResult:null,isActive:!1},t.toggleNavBar=function(){t.setState({navbarOpen:!t.state.navbarOpen})},t.handleClick=function(e){localStorage.setItem("skill",e.target.innerHTML)},t.handleLogout=function(){b.logout(),t.props.history.push("/")},t.activeClick=function(){t.setState({isActive:!t.state.isActive})},t}return Object(E.a)(a,e),Object(p.a)(a,[{key:"componentDidUpdate",value:function(e){this.props.location.pathname!==e.location.pathname&&this.setState({navbarOpen:!1})}},{key:"render",value:function(){var e=this.state.isActive?"is-active":"";return r.a.createElement("nav",{className:"navbar nav is-fixed-top"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"navbar-brand"},r.a.createElement("img",{src:"https://image.flaticon.com/icons/svg/2072/2072260.svg",alt:"logo"}),r.a.createElement(f.b,{className:"navbar-item",to:"/"},r.a.createElement("h1",null,"Journo")),r.a.createElement("a",{role:"button",onClick:this.activeClick,className:"navbar-burger burger ".concat(e),"aria-label":"menu","aria-expanded":"false"},r.a.createElement("span",{"aria-hidden":"true",className:"white"}),r.a.createElement("span",{"aria-hidden":"true",className:"white"}),r.a.createElement("span",{"aria-hidden":"true",className:"white"}))),r.a.createElement("div",{className:"navbar-menu ".concat(e," turq")},r.a.createElement("div",{className:"navbar-end"},r.a.createElement(f.b,{className:"navbar-item has-text-white",to:"/map/london"},"MAP"),!b.isAuthenticated()&&r.a.createElement(f.b,{className:"navbar-item has-text-white",to:"/register"},"SIGN UP"),!b.isAuthenticated()&&r.a.createElement(f.b,{className:"navbar-item has-text-white",to:"/login"},"LOGIN"),b.isAuthenticated()&&r.a.createElement(f.b,{className:"navbar-item has-text-white",to:"/createtrip"},"CREATE TRIP"),b.isAuthenticated()&&r.a.createElement(f.b,{className:"navbar-item has-text-white",to:"/profile/".concat(b.getUser())},"PROFILE"),b.isAuthenticated()&&r.a.createElement("a",{className:"navbar-item has-text-white",onClick:this.handleLogout},"LOGOUT")))))}}]),a}(r.a.Component),T=Object(y.g)(I),U=function(e){function a(){var e,t;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(t=Object(h.a)(this,(e=Object(g.a)(a)).call.apply(e,[this].concat(r)))).state={trip:{country:"",local_area:"",postcode:"",description:"",image:"",rating:"",cost:"",start_date:"",end_date:"",user:b.getUser()},errors:{}},t.handleChange=function(e){var a=e.target,n=a.name,r=a.value,l=Object(d.a)({},t.state.trip,Object(m.a)({},n,r));t.setState({trip:l})},t.handleSubmit=function(){var e=Object(o.a)(i.a.mark((function e(a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,N.a.post("/api/trips/make",t.state.trip,{headers:{Authorization:"Bearer ".concat(b.getToken())}});case 4:t.props.history.push("/profile/".concat(b.getUser())),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),t.setState({errors:e.t0.response.data});case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(a){return e.apply(this,arguments)}}(),t}return Object(E.a)(a,e),Object(p.a)(a,[{key:"render",value:function(){var e=this.state,a=e.trip,t=e.errors;return r.a.createElement("section",{className:"section hero-edittrip"},r.a.createElement("div",{className:"editcard"},r.a.createElement("form",{onSubmit:this.handleSubmit,className:"card"},r.a.createElement("div",{className:"fieldContainer"},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Country"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input is-rounded ".concat(t.country?"is-danger":""),placeholder:"Country",name:"country",onChange:this.handleChange,value:a.country})),t.country&&r.a.createElement("small",{className:"help is-danger"},t.country)),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Local area"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input is-rounded ".concat(t.local_area?"is-danger":""),placeholder:"Local area",name:"local_area",onChange:this.handleChange,value:a.local_area})),t.local_area&&r.a.createElement("small",{className:"help is-danger"},t.local_area)),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Postcode"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input is-rounded ".concat(t.postcode?"is-danger":""),placeholder:"Postcode",name:"postcode",onChange:this.handleChange,value:a.postcode})),t.postcode&&r.a.createElement("small",{className:"help is-danger"},t.postcode)),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Description"),r.a.createElement("div",{className:"control"},r.a.createElement("textarea",{className:"textarea is-rounded ".concat(t.description?"is-danger":""),placeholder:"Description",name:"description",onChange:this.handleChange,value:a.description})),t.description&&r.a.createElement("small",{className:"help is-danger"},t.description)),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Rating"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{type:"number",min:"1",max:"5",className:"input is-rounded ".concat(t.rating?"is-danger":""),placeholder:"Rating",name:"rating",onChange:this.handleChange,value:a.rating})),t.rating&&r.a.createElement("small",{className:"help is-danger"},t.rating)),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Cost in \xa3"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{type:"number",className:"input is-rounded ".concat(t.cost?"is-danger":""),placeholder:"Cost",name:"cost",onChange:this.handleChange,value:a.cost})),t.cost&&r.a.createElement("small",{className:"help is-danger"},t.cost)),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Length of trip"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input is-rounded ".concat(t.Length?"is-danger":""),placeholder:"Length of trip",name:"Length",onChange:this.handleChange,value:a.Length})),t.Length&&r.a.createElement("small",{className:"help is-danger"},t.Length)),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Start date"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{type:"date",className:"input is-rounded ".concat(t.start_date?"is-danger":""),placeholder:"Start date",name:"start_date",onChange:this.handleChange,value:a.start_date})),t.start_date&&r.a.createElement("small",{className:"help is-danger"},t.start_date)),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"End date"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{type:"date",className:"input is-rounded ".concat(t.end_date?"is-danger":""),placeholder:"End date",name:"end_date",onChange:this.handleChange,value:a.end_date})))),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Image"),r.a.createElement("div",{className:"user-image"},r.a.createElement(C,{handleChange:this.handleChange,fieldName:"image",className:"input is-rounded ".concat(t.image?"is-danger":""),value:a.image})),t.image&&r.a.createElement("small",{className:"help is-danger"},t.image))),r.a.createElement("div",{className:"is-row"},r.a.createElement("button",{className:"button is-rounded color has-text-white"},"SAVE")))))}}]),a}(r.a.Component),P=function(e){function a(){var e,t;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(t=Object(h.a)(this,(e=Object(g.a)(a)).call.apply(e,[this].concat(r)))).state={trip:{}},t.componentDidMount=Object(o.a)(i.a.mark((function e(){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.props.match.params.id,e.prev=1,e.next=4,N.a.get("/api/trips/".concat(a,"/"),{headers:{Authorization:"Bearer ".concat(b.getToken())}});case 4:n=e.sent,t.setState({trip:n.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])}))),t}return Object(E.a)(a,e),Object(p.a)(a,[{key:"isowner",value:function(){if(console.log(b.getUser(),this.state.trip.user.id),b.getUser()===this.state.trip.user.id)return!0}},{key:"render",value:function(){var e=this.props.match.params.id,a=this.state.trip;return a.user?(console.log(a),r.a.createElement("section",{className:"section hero-profile"},r.a.createElement("div",{className:"profile-fit"},r.a.createElement("div",{className:"tile is-ancestor"},r.a.createElement("div",{className:"tile is-vertical"},r.a.createElement("div",{className:"tile"},r.a.createElement("img",{className:"user-profileimage",src:a.image,alt:a.image}),r.a.createElement("div",{className:"tile end"},r.a.createElement("div",{className:"flex"},r.a.createElement(f.b,{to:"/showuser/".concat(a.user.id,"/"),key:a.user.id,className:"card"},r.a.createElement("img",{className:"tripimage",src:a.user.image,alt:a.user.image}),r.a.createElement("div",{className:"text-card"},r.a.createElement("p",null,"Creator: ",r.a.createElement("strong",null,a.user.username)),r.a.createElement("h2",null,a.user.email)))))),r.a.createElement("div",{className:"tile"},r.a.createElement("div",{className:"tile is-child box"},r.a.createElement("article",{className:"media"},r.a.createElement("div",{className:"media-content"},r.a.createElement("div",{className:"content"},r.a.createElement("p",null,r.a.createElement("strong",null,a.country)," \xb7 ",r.a.createElement("strong",null,a.local_area)," \xb7 ",r.a.createElement("small",null,"\xa3",a.cost)," \xb7 ",r.a.createElement("small",null,a.Length),"  \xb7 ",r.a.createElement("small",null,"Rating: ",a.rating,"\u2605"),r.a.createElement("br",null),r.a.createElement("strong",null,"Date: "),r.a.createElement("small",null,a.start_date)," ---  ",r.a.createElement("small",null,a.end_date),r.a.createElement("br",null),a.description))),r.a.createElement("div",{className:"center"},r.a.createElement("div",{className:"media-right"},this.isowner()&&r.a.createElement(f.b,{className:"button is-rounded color",to:"/showtrip/".concat(e,"/edit")},"Edit"))))))))))):null}}]),a}(r.a.Component),M=function(){return r.a.createElement("section",{className:"hero"},r.a.createElement("div",{className:"hero-body-failed"},r.a.createElement("div",{className:"container"},r.a.createElement("p",{className:"title is-1 has-text-centered Oops"},"Oops you took a wrong turn"))))},R=function(e){function a(){var e,t;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(t=Object(h.a)(this,(e=Object(g.a)(a)).call.apply(e,[this].concat(r)))).state={data:{username:"",email:"",password:"",password_confirmation:"",image:"",bio:""},errors:{}},t.delete=function(){var e=Object(o.a)(i.a.mark((function e(a){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),n=b.getUser(),e.prev=2,e.next=5,N.a.delete("http://localhost:8000/api/users/edit/".concat(n),{headers:{Authorization:"Bearer ".concat(b.getToken())}});case 5:t.props.history.push("/"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(a){return e.apply(this,arguments)}}(),t.handleChange=function(e){var a=e.target,n=a.name,r=a.value,l=Object(d.a)({},t.state.data,Object(m.a)({},n,r));t.setState({data:l})},t.handleSubmit=function(){var e=Object(o.a)(i.a.mark((function e(a){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),n=b.getUser(),console.log("submitting",t.state.data),e.prev=3,e.next=6,N.a.put("/api/users/edit/".concat(n,"/"),t.state.data,{headers:{Authorization:"Bearer ".concat(b.getToken())}});case 6:t.props.history.push("/profile/".concat(b.getUser())),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(3),console.log(e.t0.response),t.setState({errors:e.t0.response.data});case 13:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(a){return e.apply(this,arguments)}}(),t}return Object(E.a)(a,e),Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var a,t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=b.getUser(),e.prev=1,e.next=4,N.a.get("/api/users/show/".concat(a,"/"),{headers:{Authorization:"Bearer ".concat(b.getToken())}});case 4:t=e.sent,n=t.data,this.setState({data:n}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,this,[[1,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,a=e.errors,t=e.data;return t.image?r.a.createElement("section",{className:"section hero-login"},r.a.createElement("div",{className:"center"},r.a.createElement("form",{onSubmit:this.handleSubmit,className:"column is-6-tablet is-offset-3-tablet is-8-mobile is-offset-2-mobile card"},r.a.createElement("div",{className:"user-info"},r.a.createElement("h2",{className:"title"},"Edit Profile"),r.a.createElement("br",null),r.a.createElement("div",{className:"fieldContainer"},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"USERNAME"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input is-rounded ".concat(a.username?"is-danger":""),placeholder:"Username",name:"username",onChange:this.handleChange,value:t.username})),a.name&&r.a.createElement("small",{className:"help is-danger"},a.username)),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"EMAIL"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input is-rounded ".concat(a.email?"is-danger":""),placeholder:"Email",name:"email",onChange:this.handleChange,value:t.email})),a.email&&r.a.createElement("small",{className:"help is-danger"},a.email)),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"PASSWORD"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input is-rounded ".concat(a.password?"is-danger":""),type:"password",placeholder:"Password",name:"password",onChange:this.handleChange})),a.password&&r.a.createElement("small",{className:"help is-danger"},a.password)),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"PASSWORD CONFIRMATION"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input is-rounded ".concat(a.password_confirmation?"is-danger":""),type:"password",placeholder:"Password Confirmation",name:"password_confirmation",onChange:this.handleChange})),a.password_confirmation&&r.a.createElement("small",{className:"help is-danger"},a.password_confirmation)),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Bio"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input is-rounded ".concat(a.bio?"is-danger":""),placeholder:"Bio",name:"bio",value:t.bio,onChange:this.handleChange})),a.bio&&r.a.createElement("small",{className:"help is-danger"},a.bio)))),r.a.createElement("div",{className:"user-image"},r.a.createElement(C,{handleChange:this.handleChange,fieldName:"image",inputClassName:"is-row",value:t.image}),r.a.createElement("div",{className:"is-row"},r.a.createElement("button",{type:"submit",className:"button is-rounded color"},"SAVE"),r.a.createElement("button",{onClick:this.delete,className:"button is-rounded is-danger"},"DELETE")))))):null}}]),a}(r.a.Component),W=function(e){function a(){var e,t;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(t=Object(h.a)(this,(e=Object(g.a)(a)).call.apply(e,[this].concat(r)))).state={trip:{country:"",local_area:"",postcode:"",description:"",image:"",rating:"",cost:"",start_date:"",end_date:"",Length:"",user:""},errors:{}},t.handleChange=function(e){var a=e.target,n=a.name,r=a.value,l=Object(d.a)({},t.state.trip,Object(m.a)({},n,r));t.setState({trip:l})},t.handleSubmit=function(){var e=Object(o.a)(i.a.mark((function e(a){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),n=t.props.match.params.id,e.prev=2,e.next=5,N.a.put("/api/trips/".concat(n,"/"),t.state.trip,{headers:{Authorization:"Bearer ".concat(b.getToken())}});case 5:t.props.history.push("/showtrip/".concat(n)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),t.setState({errors:e.t0.response.data});case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(a){return e.apply(this,arguments)}}(),t.delete=function(){var e=Object(o.a)(i.a.mark((function e(a){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),n=t.props.match.params.id,e.prev=2,e.next=5,N.a.delete("/api/trips/".concat(n,"/"),{headers:{Authorization:"Bearer ".concat(b.getToken())}});case 5:t.props.history.push("/profile/".concat(b.getUser())),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),t.setState({errors:e.t0.response.data});case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(a){return e.apply(this,arguments)}}(),t}return Object(E.a)(a,e),Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var a,t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.props.match.params.id,e.prev=1,e.next=4,N.a.get("/api/trips/edit/".concat(a,"/"),{headers:{Authorization:"Bearer ".concat(b.getToken())}});case 4:t=e.sent,n=t.data,this.setState({trip:n}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,this,[[1,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,a=e.trip,t=e.errors;return r.a.createElement("section",{className:"section hero-edittrip"},r.a.createElement("div",{className:"editcard"},r.a.createElement("form",{onSubmit:this.handleSubmit,className:"card"},r.a.createElement("div",{className:"fieldContainer"},r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Country"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input is-rounded ".concat(t.country?"is-danger":""),placeholder:"Country",name:"country",onChange:this.handleChange,value:a.country})),t.country&&r.a.createElement("small",{className:"help is-danger"},t.country)),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Local area"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input is-rounded ".concat(t.local_area?"is-danger":""),placeholder:"Local area",name:"local_area",onChange:this.handleChange,value:a.local_area})),t.local_area&&r.a.createElement("small",{className:"help is-danger"},t.local_area)),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Postcode"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input is-rounded ".concat(t.postcode?"is-danger":""),placeholder:"Postcode",name:"postcode",onChange:this.handleChange,value:a.postcode})),t.postcode&&r.a.createElement("small",{className:"help is-danger"},t.postcode)),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Description"),r.a.createElement("div",{className:"control"},r.a.createElement("textarea",{className:"textarea is-rounded ".concat(t.description?"is-danger":""),placeholder:"Description",name:"description",onChange:this.handleChange,value:a.description})),t.description&&r.a.createElement("small",{className:"help is-danger"},t.description)),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Rating"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{type:"number",min:"1",max:"5",className:"input is-rounded ".concat(t.rating?"is-danger":""),placeholder:"Rating",name:"rating",onChange:this.handleChange,value:a.rating})),t.rating&&r.a.createElement("small",{className:"help is-danger"},t.rating)),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Cost in \xa3"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{type:"number",className:"input is-rounded ".concat(t.cost?"is-danger":""),placeholder:"Cost",name:"cost",onChange:this.handleChange,value:a.cost})),t.cost&&r.a.createElement("small",{className:"help is-danger"},t.cost)),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Length of trip"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input is-rounded ".concat(t.Length?"is-danger":""),placeholder:"Length of trip",name:"Length",onChange:this.handleChange,value:a.Length})),t.Length&&r.a.createElement("small",{className:"help is-danger"},t.Length)),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Start date"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{type:"date",className:"input is-rounded ".concat(t.start_date?"is-danger":""),placeholder:"Start date",name:"start_date",onChange:this.handleChange,value:a.start_date})),t.start_date&&r.a.createElement("small",{className:"help is-danger"},t.start_date)),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"End date"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{type:"date",className:"input is-rounded ".concat(t.end_date?"is-danger":""),placeholder:"End date",name:"end_date",onChange:this.handleChange,value:a.end_date})))),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Image"),r.a.createElement("div",{className:"user-image"},a.image&&r.a.createElement(C,{handleChange:this.handleChange,fieldName:"image",className:"input is-rounded ".concat(t.image?"is-danger":""),value:a.image})),t.image&&r.a.createElement("small",{className:"help is-danger"},t.image))),r.a.createElement("div",{className:"is-row"},r.a.createElement("button",{className:"button is-rounded color has-text-white"},"EDIT"),r.a.createElement("button",{onClick:this.delete,className:"button is-rounded is-danger"},"DELETE")))))}}]),a}(r.a.Component),z=function(e){function a(){var e,t;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(t=Object(h.a)(this,(e=Object(g.a)(a)).call.apply(e,[this].concat(r)))).state={user:{}},t}return Object(E.a)(a,e),Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var a,t,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.props.match.params.id,e.prev=1,e.next=4,N.a.get("/api/users/show/".concat(a),{headers:{Authorization:"Bearer ".concat(b.getToken())}});case 4:t=e.sent,n=t.data.trips,r=[n[0],n[1],n[2]],this.setState({trips:r}),this.setState({user:t.data}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0),this.props.history.push("/error");case 15:case"end":return e.stop()}}),e,this,[[1,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,a=e.user,t=e.trips;return a?r.a.createElement("section",{className:"section hero-profile"},r.a.createElement("div",{className:"profile-fit"},r.a.createElement("div",{className:"tile is-ancestor"},r.a.createElement("div",{className:"tile is-vertical"},r.a.createElement("div",{className:"tile"},r.a.createElement("img",{className:"user-profileimage",src:a.image,alt:a.image}),r.a.createElement("div",{className:"tile end"},r.a.createElement("div",{className:"flex"},t&&t.map((function(e){return r.a.createElement(f.b,{to:"/showtrip/".concat(e.id,"/"),key:e.id,className:"card"},r.a.createElement("img",{className:"tripimage",src:e.image,alt:e.image}),r.a.createElement("div",{className:"text-card"},r.a.createElement("h1",null,e.country),r.a.createElement("h2",null,e.local_area),r.a.createElement("h3",null,e.Length),r.a.createElement("h3",null,"\xa3",e.cost),r.a.createElement("h4",null,"Rating: ",e.rating," \u2605")))}))))),r.a.createElement("div",{className:"tile"},r.a.createElement("div",{className:"tile is-child box"},r.a.createElement("article",{className:"media"},r.a.createElement("div",{className:"media-content"},r.a.createElement("div",{className:"content"},r.a.createElement("p",null,r.a.createElement("strong",null,a.username)," - ",r.a.createElement("small",null,a.email),r.a.createElement("br",null),a.bio))),r.a.createElement("div",{className:"center"},r.a.createElement("div",{className:"media-right"}))))))))):null}}]),a}(r.a.Component);var B=function(){return r.a.createElement(f.a,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(T,null),r.a.createElement(y.d,null,r.a.createElement(y.b,{exact:!0,path:"/",component:x}),r.a.createElement(L,{path:"/profile/:id/edit",component:R}),r.a.createElement(L,{path:"/showtrip/:id/edit",component:W}),r.a.createElement(L,{path:"/profile",component:k}),r.a.createElement(L,{path:"/showuser/:id",component:z}),r.a.createElement(y.b,{path:"/login",component:w}),r.a.createElement(y.b,{path:"/register",component:O}),r.a.createElement(y.b,{path:"/map/:place",component:A}),r.a.createElement(L,{path:"/createtrip",component:U}),r.a.createElement(L,{path:"/showtrip/:id",component:P}),r.a.createElement(y.b,{path:"/*",component:M}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(B,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[48,1,2]]]);
//# sourceMappingURL=main.535c6d36.chunk.js.map